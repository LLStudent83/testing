(()=>{"use strict";const t=document.querySelector(".container"),i=document.querySelector(".input-valid-card"),e=document.querySelector(".to-valid");new class{constructor(t,i,e){this.containerEl=t,this.inputEl=i,this.buttonEl=e,this.init(),this.cardIdentifiers=[{mir:[2]},{american_express:[34,37]},{mastercard:[51,52,53,54,55]},{visa:[4]},{discover:[60]},{jcb:[31,35]},{diners:[30,36,38]}]}init(){null!==this.containerEl&&(this.inputEl.addEventListener("input",(t=>this.checkValidInputNum(t))),this.buttonEl.addEventListener("click",(()=>this.checkValidNumCard(this.inputEl.value))))}checkValidInputNum(t){const i=this.inputEl.value;if(!/^\d*$/.test(this.inputEl.value)){const e=i.indexOf(t.data)+1;return this.inputEl.value=i.substring(0,e-1)+i.substring(e,i.length),null===t.data&&(this.inputEl.value=""),alert("В поле валидации нужно вводить только цифры"),!1}return!0}checkValidNumCard(t){!function(t){const i=t.length;return!(Number(t.substring(i-1))!==10-t.substring(0,i-1).split("").reverse().map((t=>Number(t))).reduce(((t,i,e)=>e%2==0&&(i*=2)>9?t+(i-=9):t+i),0)%10)}(t)?alert("Вы ввели неверный номер карты"):this.identifyAffiliationCard(t)}identifyAffiliationCard(t){this.cardIdentifiers.forEach((i=>{for(const e in i)i[e].forEach((i=>{new RegExp(`^${i}`).test(t)&&this.showAffiliationCard(e)}))}))}showAffiliationCard(t){document.querySelectorAll(".image-card").forEach((t=>t.classList.add("mask")));const i=document.querySelector(`.${t}`);i.classList.remove("mask"),i.classList.add("acktiv")}}(t,i,e)})();